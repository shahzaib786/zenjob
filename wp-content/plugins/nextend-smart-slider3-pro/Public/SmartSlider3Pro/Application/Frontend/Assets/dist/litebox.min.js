(function(){var t=this;t.N2_=t.N2_||{r:[],d:[]},t.N2R=t.N2R||function(){t.N2_.r.push(arguments)},t.N2D=t.N2D||function(){t.N2_.d.push(arguments)}}).call(window),N2D("litebox",function(d,u){function l(){return null!=navigator.userAgent.match(/iPhone/i)||null!=navigator.userAgent.match(/iPod/i)}var b,o="liteBox",i={blockrightclick:!1,revealSpeed:400,background:"rgba(0,0,0,.8)",overlayClose:!0,escKey:!0,navKey:!0,closeTip:"tip-l-fade",closeTipText:"Close",prevTip:"tip-t-fade",prevTipText:"Previous",nextTip:"tip-t-fade",nextTipText:"Next",autoplay:!1,callbackInit:function(){},callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){},callbackError:function(){},callbackPrev:function(){},callbackNext:function(){},errorMessage:"Error loading content."};function e(t,e){this.timeout=!1,this.clickTimeout=!1,this.element=t,this.$element=d(this.element),this.options=d.extend({},i,e),this._defaults=i,this._name=o,this.init()}e.prototype={init:function(){var e=this;this.$element.on("click n2click",function(t){n2ss.isClickAllowed(t)&&(d.contains(t.currentTarget,d(t.target).closest('a[href!="#"], *[onclick][onclick!=""]').get(0))||(t.preventDefault(),!1===e.clickTimeout&&(e.openLitebox(),e.clickTimeout=setTimeout(function(){e.clickTimeout=!1},300))))}),this.options.callbackInit.call(this)},openLitebox:function(){var e=this;this.options.callbackBeforeOpen.call(this),e.buildLitebox();var o=this.$element;if(e.populateLitebox(o),e.options.overlayClose&&$litebox.on("click",function(t){!1===e.clickTimeout&&(t.target===this||d(t.target).hasClass("litebox-container")||d(t.target).hasClass("litebox-error"))&&e.closeLitebox()}),$close.on("click",function(){!1===e.clickTimeout&&e.closeLitebox()}).keypress(function(t){32!==t.charCode&&13!==t.charCode||(t.preventDefault(),d(t.target).click())}),this.$element.attr("data-litebox-group")){e=this;var t=this.$element.attr("data-litebox-group"),i=d('[data-litebox-group="'+this.$element.attr("data-litebox-group")+'"]'),n=[];d('[data-litebox-group="'+t+'"]').each(function(){var t=d(this).attr("href")||d(this).data("href");n.push(t)}),d(n).each(function(){var t=new Image;t.src=this,0<t.width&&d("<img />").attr("src",this).addClass("litebox-preload").appendTo("body").hide()}),d(".litebox-nav").show(),$prevNav.off("click").on("click",function(){e.options.callbackPrev.call(this);var t=i.index(o);o=i.eq(t-1),d(o).length||(o=i.last()),e.populateLitebox(o)}),$nextNav.off("click").on("click",function(){e.options.callbackNext.call(this);var t=i.index(o);o=i.eq(t+1),d(o).length||(o=i.first()),e.populateLitebox(o),e.startAutoplay()})}d("body").on("keydown.litebox",function(t){e.options.escKey&&27==t.keyCode&&(t.stopImmediatePropagation(),e.closeLitebox()),e.options.navKey&&37==t.keyCode&&(t.stopImmediatePropagation(),d(".litebox-prev").trigger("click")),e.options.navKey&&39==t.keyCode&&(t.stopImmediatePropagation(),d(".litebox-next").trigger("click"))}),this.startAutoplay(),this.options.callbackAfterOpen.call(this),(null!=navigator.userAgent.match(/iPad/i)&&!l()||l())&&d(".litebox-container").addClass("litebox-iframe-holder")},startAutoplay:function(){if(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.options.autoplay){this.timeout=setTimeout(function(){d(".litebox-next").trigger("click")},this.options.autoplay)}},buildLitebox:function(){$litebox=d("<div>",{class:"litebox-overlay","aria-label":"Lightbox"}),$close=d("<div>",{class:"litebox-close "+this.options.closeTip,"data-tooltip":this.options.closeTipText,"aria-label":this.options.closeTipText,tabindex:0,role:"button"}),$text=d("<div>",{class:"litebox-text"}),$error=d('<div class="litebox-error"><span>'+this.options.errorMessage+"</span></div>"),$prevNav=d("<div>",{class:"litebox-nav litebox-prev "+this.options.prevTip,"data-tooltip":this.options.prevTipText}),$nextNav=d("<div>",{class:"litebox-nav litebox-next "+this.options.nextTip,"data-tooltip":this.options.nextTipText}),$container=d("<div>",{class:"litebox-container"}),$loader=d("<div>",{class:"litebox-loader"}),d(document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.body).prepend($litebox.css({"background-color":this.options.background})),$litebox.append($text,$prevNav,$nextNav,$container,$close),$litebox.css("display","flex").animate({opacity:1},this.options.revealSpeed),this.options.blockrightclick&&$litebox.on("contextmenu",function(t){t.preventDefault()})},populateLitebox:function(t){var e=this,o=t.attr("href")||t.data("href"),i=d(".litebox-content");this.options.autoplay=t.data("autoplay")||this.options.autoplay,$litebox.append($loader);var n=t.data("title");if(n===u||""==n)d(".litebox-text").removeClass("active"),d(".litebox-text").html();else{n="<b>"+n+"</b>";var l=t.data("description");l!==u&&""!=l&&(n+=" - "+l),d(".litebox-text").html(n),d(".litebox-text").addClass("active")}if(null!==o.match(/\.(jpeg|jpg|gif|png|bmp|webp|svg)/i)){var a=d("<img>",{src:o,class:"litebox-content"});e.transitionContent("image",i,a),d("img.litebox-content").n2imagesLoaded(function(){$loader.remove()}),a.on("error",function(){e.liteboxError(),$loader.remove()})}else if(videoURL=o.match(/(youtube|youtu|vimeo|dailymotion|kickstarter)\.(com|be)\/((watch\?v=([-\w]+))|(video\/([-\w]+))|(projects\/([-\w]+)\/([-\w]+))|([-\w]+))/)){if(n2const.lightboxMobileNewTab&&n2const.isMobile){var s=window.open(o,"_blank");return s&&s.focus(),$loader.remove(),void this.closeLitebox()}var c="";if("youtube"==videoURL[1]&&(c="https://www.youtube.com/embed/"+videoURL[5]+"?fs=1&amp;wmode=opaque&amp;autoplay=1;rel=0"),"youtu"==videoURL[1]&&(c="https://www.youtube.com/embed/"+videoURL[3]+"?fs=1&amp;wmode=opaque&amp;autoplay=1;rel=0"),"vimeo"==videoURL[1]&&(c="https://player.vimeo.com/video/"+videoURL[3]+"?autoplay=1"),"dailymotion"==videoURL[1]&&(c="https://www.dailymotion.com/embed/video/"+videoURL[7]),"kickstarter"==videoURL[1]&&(c="https://www.kickstarter.com/projects/"+videoURL[9]+"/"+videoURL[10]+"/widget/video.html"),c){var r=d("<iframe>",{frameborder:"0",vspace:"0",hspace:"0",scrolling:"yes",allowfullscreen:"",class:"litebox-content",style:"background: #000",seamless:"seamless",sandbox:"allow-forms allow-popups allow-scripts allow-same-origin",tabindex:"0"});e.transitionContent("embed",i,r),r.attr("src",c),r.on("load",function(){$loader.remove(),r[0].focus()})}}else if("#"==o.substring(0,1))d(o).length?((b=d("<div>",{class:"litebox-content litebox-inline-html"})).append(d(o).clone()),e.transitionContent("inline",i,b)):e.liteboxError(),$loader.remove();else{if("mp4"===o.split(".").pop()){var p=d('<video autoplay controls class="litebox-content"></video>').append('<source src="'+o+'" type="video/mp4">');e.transitionContent("video",i,p),p[0].focus(),$loader.remove()}else{r=d("<iframe>",{src:o,frameborder:"0",vspace:"0",hspace:"0",scrolling:"yes",class:"litebox-content",allowfullscreen:"",tabindex:"0"});o.match(/\.pdf/)||r.attr("sandbox","allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-presentation allow-top-navigation"),e.transitionContent("iframe",i,r),r.on("load",function(){$loader.remove(),n2const.isIOS&&(r.css({position:"relative"}),setTimeout(function(){r.css({position:"absolute"})},200)),r[0].focus(),r[0].contentWindow.focus()})}}},transitionContent:function(t,e,o){var i=this;"inline"!=t&&$container.removeClass("litebox-scroll"),e.remove(),$container.append(o),"inline"==t&&$container.addClass("litebox-scroll"),i.centerContent(),d(window).on("resize",function(){i.centerContent()})},centerContent:function(){b!==u&&d(".litebox-inline-html").outerHeight()<$container.height()&&d(".litebox-inline-html").css({"margin-top":"-"+d(".litebox-inline-html").outerHeight()/2+"px",top:"50%"})},closeLitebox:function(){this.options.callbackBeforeClose.call(this),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),$litebox.fadeOut(this.options.revealSpeed,function(){d(".litebox-nav").hide(),$litebox.empty().remove(),d(".litebox-preload").remove()}),d(".tipsy").fadeOut(this.options.revealSpeed,function(){d(this).remove()}),d(".litebox-prev").off("click"),d(".litebox-next").off("click"),d("body").off(".litebox"),this.options.callbackAfterClose.call(this)},liteboxError:function(){this.options.callbackError.call(this),$container.append($error)}},d.fn[o]=function(t){return this.each(function(){d.data(this,o)||d.data(this,o,new e(this,t))})},window.n2Lightbox=function(t,e){t.find("a[data-n2-lightbox-urls], div[data-n2-lightbox-urls]").css("cursor","zoom-in").each(function(){for(var t=d(this),e=t.data("litebox-group"),o=t.attr("data-n2-lightbox-urls").split(","),i=t.attr("data-n2-lightbox-titles").split("|||"),n=0;n<o.length;n++)if(""!==o[n]){var l=d('<a href="'+o[n]+'" data-litebox-group="'+e+'" style="display:none;"></a>').appendTo("body");i[n]&&l.data("title",i[n])}}),t.find("a[data-n2-lightbox], div[data-n2-lightbox]").css("cursor","zoom-in").liteBox(d.extend({callbackBeforeOpen:function(t){this.$element.trigger("mediaStarted","lightbox")},callbackAfterClose:function(){this.$element.trigger("mediaEnded","lightbox")}},e))},N2R("windowLoad",function(){n2Lightbox(d("body"))}),d(window).on("n2Rocket",function(t,e){n2Lightbox(e)})});