"function"!=typeof window.n2SSIframeLoader&&(void 0===window.jQuery&&void 0!==window.parent&&(window.jQuery=window.parent.jQuery),function(h){var i=[],t=window.addEventListener?"addEventListener":"attachEvent";function e(t,e){this.i=e,this.frame=t,this.$frame=h(t)}window[t]("attachEvent"==t?"onmessage":"message",function(t){for(var e=0;e<i.length;e++)i[e]&&i[e].match(t.source)&&i[e].message(t[t.message?"message":"data"])}),e.prototype.match=function(t){return t===(this.frame.contentWindow||this.frame.contentDocument)&&(this.frameContent=this.frame.contentWindow||this.frame.contentDocument,!0)},e.prototype.message=function(t){switch(t.key){case"setLocation":"function"==typeof window.zajax_goto?window.zajax_goto(t.location):window.location=t.location;break;case"ready":var e=this.getClientHeight();this.frameContent.postMessage({key:"ackReady",clientHeight:e},"*");break;case"resize":if(t.fullPage?this.fullpage!==t.fullPage&&(this.fullpage=t.fullPage,this.$verticalOffsetSelectors=h(t.focus.offsetTop).add(t.focus.offsetBottom),this.resizeFullPage(),h(window).on("resize.n2-ss-iframe-"+this.i,this.resizeFullPage.bind(this)),h(window).on("orientationchange.n2-ss-iframe-"+this.i,this.resizeFullPage.bind(this))):this.fullpage=0,this.$frame.css({height:t.height}),t.forceFull&&this.forcefull!==t.forceFull)this.forcefull=t.forceFull,h("body").css("overflow-x","hidden"),this.$fullWidthTo=h(".edit-post-visual-editor,.fl-responsive-preview .fl-builder-content"),this.resizeFullWidth(),h(window).on("resize.n2-ss-iframe-"+this.i,this.resizeFullWidth.bind(this)),this.watchWidth()}},e.prototype.watchWidth=function(){if(this.$fullWidthTo.length)if(void 0!==window.ResizeObserver){var e=0;this.observer=new ResizeObserver(function(t){t.forEach(function(t){e!==t.contentRect.width&&(e=t.contentRect.width,this.resizeFullWidth())}.bind(this))}.bind(this)),this.observer.observe(this.$fullWidthTo[0])}else try{this.$resizeObserverIframe=h('<iframe class="bt_skip_resize" title="Resize helper" sandbox="allow-same-origin allow-scripts" style="margin:0 !important;padding:0;border:0;display:block;width:100%;height:0;min-height:0 !important;max-height:0;"></iframe>').on("load",function(t){var i=0,n=h(t.target.contentWindow?t.target.contentWindow:t.target.contentDocument.defaultView).on("resize",function(t){var e=n.width();i!==e&&(i=e,this.resizeFullWidth())}.bind(this))}.bind(this)).appendTo(this.$fullWidthTo[0])}catch(t){}},e.prototype.exists=function(){return!!h.contains(document.body,this.frame)||(i[this.i]=!1,h(window).off(".n2-ss-iframe-"+this.i),this.observer&&(this.observer.unobserve(this.$fullWidthTo[0]),delete this.observer),this.$resizeObserverIframe&&(this.$resizeObserverIframe.remove(),delete this.$resizeObserverIframe),!1)},e.prototype.resizeFullWidth=function(){if(this.exists()){var t=0,e=0,i="rtl"===h("html").attr("dir");if(this.$fullWidthTo.length){var n=this.$fullWidthTo[0].getBoundingClientRect();t=n.width,e=i?(document.body.clientWidth||document.documentElement.clientWidth)-n.right:n.left}var o=0<t?t:document.body.clientWidth||document.documentElement.clientWidth,s=this.$frame.parent(),r=s[0].getBoundingClientRect(),a=-(i?(document.body.clientWidth||document.documentElement.clientWidth)-r.right:r.left)-parseInt(s.css("paddingLeft"))-parseInt(s.css("borderLeftWidth"))+e;this.$frame.css({marginLeft:a,marginRight:a,maxWidth:"none"}).width(o)}},e.prototype.resizeFullPage=function(t){if(this.exists()){for(var e=this.getClientHeight(t),i=0;i<this.$verticalOffsetSelectors.length;i++)e-=this.$verticalOffsetSelectors.eq(i).outerHeight();this.frameContent.postMessage({key:"update",clientHeight:e},"*"),this.$frame.height(e)}},e.prototype.getClientHeight=function(t){var e=window.document,i=0;try{window.parent&&window.parent!==window&&(e=window.parent.document)}catch(t){}if(window.matchMedia&&/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||window.opera)){var n,o=!1,s=this.lastOrientation;t&&"orientationchange"===t.type&&(o=!0),n=/iPad|iPhone|iPod/.test(navigator.platform)?e.documentElement.clientHeight:window.innerHeight,window.matchMedia("(orientation: landscape)").matches?(i=Math.min(screen.width,n),90!==s&&(o=!0,this.lastOrientation=90)):(i=Math.min(screen.height,n),0!==s&&(o=!0,this.lastOrientation=0)),!o&&Math.abs(i-this.lastClientHeight)<100?i=this.lastClientHeight:this.lastClientHeight=i}else i=e.documentElement.clientHeight||e.body.clientHeight;return i},window.n2SSIframeLoader=function(t){i.push(new e(t,i.length))}}(window.jQuery));